"use strict";(self["webpackChunkvue3_template"]=self["webpackChunkvue3_template"]||[]).push([[504],{7436:function(e,l,a){a.r(l),a.d(l,{default:function(){return k}});var u=a(3396),t=a(4870),d=a(2507),o=a(9136),m=a(3498),n=a(9242),r=a(7192),p=a(6569);const i=(e,l)=>p.d.request({url:`/gm/roles/${e}/email`,method:"post",data:l}),s=e=>p.d.request({url:"/gm/gold/list",method:"get",params:e});var f=a(6881);const g=(0,u._)("span",{class:"text-warning sm"},"ss装备不要勾选！！！",-1),_=(0,u._)("div",{class:"card-header"},[(0,u._)("span",null,"物品代码")],-1);var c=(0,u.aZ)({__name:"EmailForm",setup(e,{expose:l}){const a=(0,t.iH)(),d=(0,t.qj)({code:null,number:0,seperate_upgrade:0,upgrade:0,is_amplify:!1,amplify_option:3,amplify_value:0,gold:0,seal_flag:!1}),o=(0,t.qj)({code:[{type:"integer",min:0,message:"请输入物品代码",trigger:"blur"}],number:[{required:!0,message:"请输入数量",trigger:"blur"}],upgrade:[{type:"integer",min:0,max:31,message:"强化/增幅等级在0至31",trigger:"blur"}]}),m=(0,t.iH)(null),p=[{label:"体力",value:1},{label:"精神",value:2},{label:"力量",value:3},{label:"智力",value:4}],c=(0,t.qj)({data:[],total:0,loading:!1}),w=(0,t.qj)({page:1,per_page:10});let b=(0,t.qj)({name:""});const W=(0,t.iH)(),v=async()=>{const e=await(0,r.Gu)(a);if(!e)return;if(!m.value)return void(0,f.N3)("未选择角色ID");"string"===typeof d.gold&&(d.gold=0);const l={...d};l.gold=1e4*d.gold;try{await i(m.value,l),(0,f.PE)("发送成功，请小退一下！")}catch(u){}},y=e=>{m.value=e},V=async()=>{c.loading=!0;const e={...b,...w},{items:l,total:a}=await s(e);c.data=l,c.total=a,c.loading=!1},U=e=>{w.per_page=e,V()},h=e=>{w.page=e,V()},k=()=>{w.page=1,V()},S=()=>{W.value.resetFields(),w.page=1,V()};return V(),l({setCharacNo:y}),(e,l)=>{const m=(0,u.up)("el-input"),r=(0,u.up)("el-form-item"),i=(0,u.up)("el-checkbox"),s=(0,u.up)("el-option"),f=(0,u.up)("el-select"),y=(0,u.up)("el-button"),V=(0,u.up)("el-form"),C=(0,u.up)("el-col"),q=(0,u.up)("el-row"),x=(0,u.up)("el-table-column"),j=(0,u.up)("el-table"),M=(0,u.up)("el-pagination"),Z=(0,u.up)("el-card"),F=(0,u.Q2)("loading");return(0,u.wg)(),(0,u.iD)("div",null,[(0,u.Wm)(q,{gutter:20},{default:(0,u.w5)((()=>[(0,u.Wm)(C,{span:8},{default:(0,u.w5)((()=>[(0,u.Wm)(V,{model:d,rules:o,ref_key:"formRef",ref:a,"label-width":"100px"},{default:(0,u.w5)((()=>[(0,u.Wm)(r,{label:"物品代码",prop:"code"},{default:(0,u.w5)((()=>[(0,u.Wm)(m,{modelValue:d.code,"onUpdate:modelValue":l[0]||(l[0]=e=>d.code=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,u.Wm)(r,{label:"数量",prop:"number"},{default:(0,u.w5)((()=>[(0,u.Wm)(m,{modelValue:d.number,"onUpdate:modelValue":l[1]||(l[1]=e=>d.number=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,u.Wm)(r,{label:"武器锻造等级",prop:"seperate_upgrade"},{default:(0,u.w5)((()=>[(0,u.Wm)(m,{modelValue:d.seperate_upgrade,"onUpdate:modelValue":l[2]||(l[2]=e=>d.seperate_upgrade=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,u.Wm)(r,{label:"强化等级",prop:"upgrade"},{default:(0,u.w5)((()=>[(0,u.Wm)(m,{modelValue:d.upgrade,"onUpdate:modelValue":l[3]||(l[3]=e=>d.upgrade=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),(0,u.Wm)(r,{label:"具备异界属性"},{default:(0,u.w5)((()=>[(0,u.Wm)(i,{modelValue:d.is_amplify,"onUpdate:modelValue":l[4]||(l[4]=e=>d.is_amplify=e)},null,8,["modelValue"])])),_:1}),(0,u.wy)((0,u.Wm)(r,{label:"红字"},{default:(0,u.w5)((()=>[(0,u.Wm)(f,{modelValue:d.amplify_option,"onUpdate:modelValue":l[5]||(l[5]=e=>d.amplify_option=e)},{default:(0,u.w5)((()=>[((0,u.wg)(),(0,u.iD)(u.HY,null,(0,u.Ko)(p,(e=>(0,u.Wm)(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1},512),[[n.F8,d.is_amplify]]),(0,u.wy)((0,u.Wm)(r,{label:"追加属性",prop:"amplify_value"},{default:(0,u.w5)((()=>[(0,u.Wm)(m,{modelValue:d.amplify_value,"onUpdate:modelValue":l[6]||(l[6]=e=>d.amplify_value=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1},512),[[n.F8,d.is_amplify]]),(0,u.Wm)(r,{label:"金币",prop:"gold"},{default:(0,u.w5)((()=>[(0,u.Wm)(m,{modelValue:d.gold,"onUpdate:modelValue":l[7]||(l[7]=e=>d.gold=e),modelModifiers:{number:!0}},{append:(0,u.w5)((()=>[(0,u.Uk)("万")])),_:1},8,["modelValue"])])),_:1}),(0,u.Wm)(r,{label:"是否封装"},{default:(0,u.w5)((()=>[(0,u.Wm)(i,{modelValue:d.seal_flag,"onUpdate:modelValue":l[8]||(l[8]=e=>d.seal_flag=e)},null,8,["modelValue"]),g])),_:1}),(0,u.Wm)(r,null,{default:(0,u.w5)((()=>[(0,u.Wm)(y,{type:"primary",size:"small",onClick:v},{default:(0,u.w5)((()=>[(0,u.Uk)("发送")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,u.Wm)(C,{span:13,offset:3},{default:(0,u.w5)((()=>[(0,u.Wm)(Z,{class:"box-card"},{header:(0,u.w5)((()=>[_])),default:(0,u.w5)((()=>[(0,u._)("div",null,[(0,u.Wm)(q,null,{default:(0,u.w5)((()=>[(0,u.Wm)(V,{inline:!0,model:(0,t.SU)(b),ref_key:"filterFormRef",ref:W,"label-width":"100px",onSubmit:l[10]||(l[10]=(0,n.iM)((()=>{}),["prevent"]))},{default:(0,u.w5)((()=>[(0,u._)("div",null,[(0,u.Wm)(r,{label:"物品名称:",prop:"name"},{default:(0,u.w5)((()=>[(0,u.Wm)(m,{modelValue:(0,t.SU)(b).name,"onUpdate:modelValue":l[9]||(l[9]=e=>(0,t.SU)(b).name=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(r,null,{default:(0,u.w5)((()=>[(0,u.Wm)(y,{type:"primary",onClick:k},{default:(0,u.w5)((()=>[(0,u.Uk)("查询")])),_:1}),(0,u.Wm)(y,{onClick:(0,n.iM)(S,["prevent"])},{default:(0,u.w5)((()=>[(0,u.Uk)("重置")])),_:1},8,["onClick"])])),_:1})])])),_:1},8,["model"])])),_:1}),(0,u.Wm)(q,null,{default:(0,u.w5)((()=>[(0,u.wy)(((0,u.wg)(),(0,u.j4)(j,{data:c.data,border:"",fit:""},{default:(0,u.w5)((()=>[(0,u.Wm)(x,{prop:"code",label:"物品编号",width:"150"}),(0,u.Wm)(x,{prop:"name",label:"物品名称"})])),_:1},8,["data"])),[[F,c.loading]])])),_:1}),(0,u.Wm)(q,null,{default:(0,u.w5)((()=>[(0,u.Wm)(M,{"current-page":w.page,"page-sizes":[10,20,30,40,50],"page-size":w.per_page,total:c.total,background:"",layout:"total, sizes, prev, pager, next, jumper",onSizeChange:U,onCurrentChange:h},null,8,["current-page","page-size","total"])])),_:1})])])),_:1})])),_:1})])),_:1})])}}});const w=c;var b=w,W=a(9456),v=a(1285);const y={class:"tc-step-border"},V={class:"l"};var U=(0,u.aZ)({__name:"index",setup(e){const l=(0,t.qj)({data:[],loading:!1}),a=async e=>{try{l.loading=!0,l.data=await(0,W.F3)(e),n.value.setCharacNo(null),l.loading=!1}catch(a){l.loading=!1}},n=(0,t.iH)(null),r=e=>{n.value.setCharacNo(e)};return(e,p)=>{const i=(0,u.up)("el-row");return(0,u.wg)(),(0,u.iD)("div",null,[(0,u.Wm)(i,null,{default:(0,u.w5)((()=>[(0,u.Wm)((0,t.SU)(d.Z),{title:"邮件工具"})])),_:1}),(0,u._)("div",y,[(0,u._)("div",V,[(0,u.Wm)((0,t.SU)(o.Z),{num:"1",title:"账号选择"},{default:(0,u.w5)((()=>[(0,u.Wm)((0,t.SU)(m.Z),{onSetUid:a})])),_:1}),(0,u.Wm)((0,t.SU)(o.Z),{num:"2",title:"角色选择"},{default:(0,u.w5)((()=>[(0,u.Wm)((0,t.SU)(v.Z),{ref:"roleTableRef",loading:l.loading,data:l.data,onSetCharacNo:r},null,8,["loading","data"])])),_:1}),(0,u.Wm)((0,t.SU)(o.Z),{num:"3",title:"发送邮件","is-last":""},{default:(0,u.w5)((()=>[(0,u.Wm)((0,t.SU)(b),{ref_key:"emailFormRef",ref:n},null,512)])),_:1})])])])}}});const h=U;var k=h}}]);